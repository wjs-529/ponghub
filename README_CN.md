<div align="center">

# [![PongHub](imgs/band.png)](https://health.ch3nyang.top)

ğŸŒ [Live Demo](https://health.ch3nyang.top) | ğŸ“– [English](README.md)

</div>

## ç®€ä»‹

PongHub æ˜¯ä¸€ä¸ªå¼€æºçš„æœåŠ¡çŠ¶æ€ç›‘æ§ç½‘ç«™ï¼Œæ—¨åœ¨å¸®åŠ©ç”¨æˆ·ç›‘æ§å’ŒéªŒè¯æœåŠ¡çš„å¯ç”¨æ€§ã€‚å®ƒæ”¯æŒ

- **ğŸ•µï¸ é›¶ä¾µå…¥ç›‘æ§** - æ— éœ€æ”¹åŠ¨ä»£ç å³å¯å®ç°å…¨åŠŸèƒ½ç›‘æ§
- **ğŸš€ ä¸€é”®éƒ¨ç½²** - é€šè¿‡ Actions è‡ªåŠ¨æ„å»ºï¼Œä¸€é”®éƒ¨ç½²è‡³ Github Pages
- **ğŸŒ å…¨å¹³å°æ”¯æŒ** - å…¼å®¹ OpenAI ç­‰å…¬å…±æœåŠ¡åŠç§æœ‰åŒ–éƒ¨ç½²
- **ğŸ” å¤šç«¯å£æ¢æµ‹** - å•æœåŠ¡æ”¯æŒåŒæ—¶ç›‘æ§å¤šä¸ªç«¯å£çŠ¶æ€
- **ğŸ¤– æ™ºèƒ½å“åº”éªŒè¯** - ç²¾å‡†åŒ¹é…çŠ¶æ€ç åŠæ­£åˆ™è¡¨è¾¾å¼æ ¡éªŒå“åº”ä½“
- **ğŸ› ï¸ è‡ªå®šä¹‰è¯·æ±‚å¼•æ“** - è‡ªç”±é…ç½®è¯·æ±‚å¤´/ä½“ã€è¶…æ—¶å’Œé‡è¯•ç­–ç•¥
- **ğŸ”’ SSL è¯ä¹¦ç›‘æ§** - è‡ªåŠ¨æ£€æµ‹ SSL è¯ä¹¦è¿‡æœŸå¹¶å‘é€é€šçŸ¥
- **ğŸ“Š å®æ—¶çŠ¶æ€å±•ç¤º** - ç›´è§‚çš„æœåŠ¡å“åº”æ—¶é—´ã€å“åº”çŠ¶æ€è®°å½•
- **âš ï¸ å¼‚å¸¸å‘Šè­¦é€šçŸ¥** - åˆ©ç”¨ GitHub Actions å®ç°å¼‚å¸¸å‘Šè­¦é€šçŸ¥

![æµè§ˆå™¨æˆªå›¾](imgs/browser_CN.png)

## å¿«é€Ÿå¼€å§‹

1. Star å¹¶ Fork [PongHub](https://github.com/WCY-dt/ponghub)

2. ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„ [`config.yaml`](config.yaml) æ–‡ä»¶ï¼Œé…ç½®ä½ çš„æœåŠ¡æ£€æŸ¥é¡¹

3. ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„ [`CNAME`](CNAME) æ–‡ä»¶ï¼Œé…ç½®ä½ çš„è‡ªå®šä¹‰åŸŸå

   > å¦‚æœä½ ä¸éœ€è¦è‡ªå®šä¹‰åŸŸåï¼Œè¯·åˆ é™¤ `CNAME` æ–‡ä»¶

4. æäº¤ä¿®æ”¹å¹¶æ¨é€åˆ°ä½ çš„ä»“åº“ï¼ŒGitHub Actions å°†è‡ªåŠ¨æ›´æ–°ï¼Œæ— éœ€å¹²é¢„

> [!TIP]
> é»˜è®¤æƒ…å†µä¸‹ï¼ŒGitHub Actions æ¯ 30 åˆ†é’Ÿè¿è¡Œä¸€æ¬¡ã€‚å¦‚æœä½ éœ€è¦æ›´æ”¹è¿è¡Œé¢‘ç‡ï¼Œè¯·ä¿®æ”¹ [`.github/workflows/deploy.yml`](.github/workflows/deploy.yml) æ–‡ä»¶ä¸­çš„ `cron` è¡¨è¾¾å¼ã€‚
> 
> è¯·ä¸è¦å°†é¢‘ç‡è®¾ç½®è¿‡é«˜ï¼Œä»¥å…è§¦å‘ GitHub çš„é™åˆ¶ã€‚

> [!IMPORTANT]
> å¦‚æœ GitHub Actions æœªæ­£å¸¸è‡ªåŠ¨è§¦å‘ï¼Œæ‰‹åŠ¨è§¦å‘ä¸€æ¬¡å³å¯ã€‚
> 
> è¯·æ³¨æ„æ‰“å¼€ GitHub Pagesï¼Œå¹¶å¼€å¯ GitHub Actions çš„é€šçŸ¥æƒé™ã€‚

## é…ç½®è¯´æ˜

### åŸºæœ¬é…ç½®

é…ç½®æ–‡ä»¶ `config.yaml` çš„æ ¼å¼å¦‚ä¸‹ï¼š

| å­—æ®µ                                  | ç±»å‹  | æè¿°                        | å¿…å¡« | å¤‡æ³¨                             |
|-------------------------------------|-----|---------------------------|----|--------------------------------|
| `display_num`                       | æ•´æ•°  | é¦–é¡µæ˜¾ç¤ºçš„æœåŠ¡æ•°é‡                 | âœ–ï¸ | é»˜è®¤ 72 ä¸ª                        |
| `timeout`                           | æ•´æ•°  | æ¯æ¬¡è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’            | âœ–ï¸ | å•ä½ä¸ºç§’ï¼Œé»˜è®¤ 5 ç§’                    |
| `max_retry_times`                   | æ•´æ•°  | è¯·æ±‚å¤±è´¥æ—¶çš„é‡è¯•æ¬¡æ•°                | âœ–ï¸ | é»˜è®¤ 2 æ¬¡                         |
| `max_log_days`                      | æ•´æ•°  | æ—¥å¿—ä¿ç•™å¤©æ•°ï¼Œè¶…è¿‡æ­¤å¤©æ•°çš„æ—¥å¿—å°†è¢«åˆ é™¤       | âœ–ï¸ | é»˜è®¤ 3 å¤©                         |
| `cert_notify_days`                  | æ•´æ•°  | SSL è¯ä¹¦è¿‡æœŸå‰é€šçŸ¥çš„å¤©æ•°            | âœ–ï¸ | é»˜è®¤ 7 å¤©                         |
| `services`                          | æ•°ç»„  | æœåŠ¡åˆ—è¡¨                      | âœ”ï¸ |                                |
| `services.name`                     | å­—ç¬¦ä¸² | æœåŠ¡åç§°                      | âœ”ï¸ |                                |
| `services.endpoints`                | æ•°ç»„  | ç«¯å£åˆ—è¡¨                      | âœ”ï¸ |                                |
| `services.endpoints.url`            | å­—ç¬¦ä¸² | è¯·æ±‚çš„ URL                   | âœ”ï¸ |                                |
| `services.endpoints.method`         | å­—ç¬¦ä¸² | è¯·æ±‚çš„ HTTP æ–¹æ³•               | âœ–ï¸ | æ”¯æŒ `GET`/`POST`/`PUT`ï¼Œé»˜è®¤ `GET` |
| `services.endpoints.headers`        | å¯¹è±¡  | è¯·æ±‚å¤´å†…å®¹                     | âœ–ï¸ | é”®å€¼å¯¹å½¢å¼ï¼Œæ”¯æŒè‡ªå®šä¹‰è¯·æ±‚å¤´                 |
| `services.endpoints.body`           | å­—ç¬¦ä¸² | è¯·æ±‚ä½“å†…å®¹                     | âœ–ï¸ | ä»…åœ¨ `POST`/`PUT` è¯·æ±‚æ—¶ä½¿ç”¨          |
| `services.endpoints.status_code`    | æ•´æ•°  | å“åº”ä½“æœŸæœ›çš„ HTTP çŠ¶æ€ç ï¼ˆé»˜è®¤ `200`ï¼‰ | âœ–ï¸ | é»˜è®¤ `200`                       |
| `services.endpoints.response_regex` | å­—ç¬¦ä¸² | å“åº”ä½“å†…å®¹çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…             | âœ–ï¸ |                                |
| `notifications`                     | å¯¹è±¡  | é€šçŸ¥é…ç½®                      | âœ–ï¸ | è¯¦è§ [è‡ªå®šä¹‰é€šçŸ¥](#è‡ªå®šä¹‰é€šçŸ¥)             |

ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹é…ç½®æ–‡ä»¶ï¼š

```yaml
display_num: 72
timeout: 5
max_retry_times: 2
max_log_days: 3
cert_notify_days: 7
services:
  - name: "GitHub API"
    endpoints:
      - url: "https://api.github.com"
      - url: "https://api.github.com/repos/wcy-dt/ponghub"
        method: "GET"
        headers:
          Content-Type: application/json
          Authorization: Bearer your_token
        status_code: 200
        response_regex: "full_name"
  - name: "Example Website"
    endpoints:
      - url: "https://example.com/health"
        response_regex: "status"
      - url: "https://example.com/status"
        method: "POST"
        body: '{"key": "value"}'
```

### ç‰¹æ®Šå‚æ•°

ponghub ç°å·²æ”¯æŒå¼ºå¤§çš„å‚æ•°åŒ–é…ç½®åŠŸèƒ½ï¼Œå…è®¸åœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨å¤šç§ç±»å‹çš„åŠ¨æ€å˜é‡ï¼Œè¿™äº›å˜é‡ä¼šåœ¨ç¨‹åºè¿è¡Œæ—¶å®æ—¶ç”Ÿæˆå’Œè§£æã€‚

<details>
<summary>ç‚¹å‡»å±•å¼€æŸ¥çœ‹æ”¯æŒçš„å‚æ•°ç±»å‹</summary>

<div markdown="1">

#### ğŸ“… æ—¥æœŸæ—¶é—´å‚æ•°
ä½¿ç”¨ `{{%æ ¼å¼}}` æ ¼å¼å®šä¹‰æ—¥æœŸæ—¶é—´å‚æ•°ï¼š

- `{{%Y-%m-%d}}` - å½“å‰æ—¥æœŸï¼Œæ ¼å¼ï¼š2006-01-02ï¼ˆå¦‚ï¼š2025-09-22ï¼‰
- `{{%H:%M:%S}}` - å½“å‰æ—¶é—´ï¼Œæ ¼å¼ï¼š15:04:05ï¼ˆå¦‚ï¼š17:30:45ï¼‰
- `{{%s}}` - Unixæ—¶é—´æˆ³ï¼ˆå¦‚ï¼š1727859600ï¼‰
- `{{%Y}}` - å½“å‰å¹´ä»½ï¼ˆå¦‚ï¼š2025ï¼‰
- `{{%m}}` - å½“å‰æœˆä»½ï¼Œæ ¼å¼ï¼š01-12
- `{{%d}}` - å½“å‰æ—¥æœŸï¼Œæ ¼å¼ï¼š01-31
- `{{%H}}` - å½“å‰å°æ—¶ï¼Œæ ¼å¼ï¼š00-23
- `{{%M}}` - å½“å‰åˆ†é’Ÿï¼Œæ ¼å¼ï¼š00-59
- `{{%S}}` - å½“å‰ç§’æ•°ï¼Œæ ¼å¼ï¼š00-59
- `{{%B}}` - å®Œæ•´æœˆä»½åç§°ï¼ˆå¦‚ï¼šSeptemberï¼‰
- `{{%b}}` - ç®€çŸ­æœˆä»½åç§°ï¼ˆå¦‚ï¼šSepï¼‰
- `{{%A}}` - å®Œæ•´æ˜ŸæœŸåç§°ï¼ˆå¦‚ï¼šMondayï¼‰
- `{{%a}}` - ç®€çŸ­æ˜ŸæœŸåç§°ï¼ˆå¦‚ï¼šMonï¼‰

#### ğŸ² éšæœºæ•°å‚æ•°

- `{{rand}}` - ç”Ÿæˆ0-1000000èŒƒå›´çš„éšæœºæ•°
- `{{rand_int}}` - ç”Ÿæˆå¤§èŒƒå›´éšæœºæ•´æ•°
- `{{rand(min,max)}}` - ç”ŸæˆæŒ‡å®šèŒƒå›´çš„éšæœºæ•°
    - ç¤ºä¾‹ï¼š`{{rand(1,100)}}` - ç”Ÿæˆ1-100ä¹‹é—´çš„éšæœºæ•°
    - ç¤ºä¾‹ï¼š`{{rand(1000,9999)}}` - ç”Ÿæˆ4ä½éšæœºæ•°

#### ğŸ”¤ éšæœºå­—ç¬¦ä¸²å‚æ•°

- `{{rand_str}}` - ç”Ÿæˆ8ä½éšæœºå­—ç¬¦ä¸²ï¼ˆå­—æ¯+æ•°å­—ï¼‰
- `{{rand_str(length)}}` - ç”ŸæˆæŒ‡å®šé•¿åº¦çš„éšæœºå­—ç¬¦ä¸²
    - ç¤ºä¾‹ï¼š`{{rand_str(16)}}` - ç”Ÿæˆ16ä½éšæœºå­—ç¬¦ä¸²
- `{{rand_str_secure}}` - ç”Ÿæˆ16ä½åŠ å¯†å®‰å…¨çš„éšæœºå­—ç¬¦ä¸²
- `{{rand_hex(length)}}` - ç”ŸæˆæŒ‡å®šé•¿åº¦çš„åå…­è¿›åˆ¶éšæœºå­—ç¬¦ä¸²
    - ç¤ºä¾‹ï¼š`{{rand_hex(8)}}` - ç”Ÿæˆ8ä½åå…­è¿›åˆ¶å­—ç¬¦ä¸²
    - ç¤ºä¾‹ï¼š`{{rand_hex(32)}}` - ç”Ÿæˆ32ä½åå…­è¿›åˆ¶å­—ç¬¦ä¸²

#### ğŸ†” UUIDå‚æ•°

- `{{uuid}}` - ç”Ÿæˆæ ‡å‡†UUIDï¼ˆå¸¦è¿å­—ç¬¦ï¼‰
    - ç¤ºä¾‹ï¼š`bf3655f7-8a93-4822-a458-2913a6fe4722`
- `{{uuid_short}}` - ç”ŸæˆçŸ­UUIDï¼ˆæ— è¿å­—ç¬¦ï¼‰
    - ç¤ºä¾‹ï¼š`14d44b7334014484bb81b015fb2401bf`

#### ğŸŒ ç¯å¢ƒå˜é‡å‚æ•°

- `{{env(å˜é‡å)}}` - è¯»å–ç¯å¢ƒå˜é‡çš„å€¼
    - ç¤ºä¾‹ï¼š`{{env(API_KEY)}}` - è¯»å–API_KEYç¯å¢ƒå˜é‡
    - ç¤ºä¾‹ï¼š`{{env(VERSION)}}` - è¯»å–VERSIONç¯å¢ƒå˜é‡
    - å¦‚æœç¯å¢ƒå˜é‡ä¸å­˜åœ¨ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²

ç¯å¢ƒå˜é‡å¯é€šè¿‡ GitHub Actions çš„ Repository Secrets è®¾ç½®

#### ğŸ“Š åºåˆ—å·å’Œå“ˆå¸Œå‚æ•°

- `{{seq}}` - åŸºäºå½“å‰æ—¶é—´çš„åºåˆ—å·ï¼ˆ6ä½æ•°å­—ï¼‰
- `{{seq_daily}}` - æ¯æ—¥åºåˆ—å·ï¼ˆè‡ªåˆå¤œèµ·çš„ç§’æ•°ï¼‰
- `{{hash_short}}` - çŸ­å“ˆå¸Œå€¼ï¼ˆ6ä½åå…­è¿›åˆ¶ï¼‰
- `{{hash_md5_like}}` - MD5é£æ ¼çš„é•¿å“ˆå¸Œå€¼ï¼ˆ32ä½åå…­è¿›åˆ¶ï¼‰

#### ğŸŒ ç½‘ç»œå’Œç³»ç»Ÿä¿¡æ¯å‚æ•°

- `{{local_ip}}` - è·å–ç³»ç»Ÿæœ¬åœ°IPåœ°å€
- `{{hostname}}` - è·å–ç³»ç»Ÿä¸»æœºå
- `{{user_agent}}` - ç”Ÿæˆéšæœºçš„User-Agentå­—ç¬¦ä¸²
- `{{http_method}}` - ç”Ÿæˆéšæœºçš„HTTPæ–¹æ³•ï¼ˆGETã€POSTã€PUTã€DELETEç­‰ï¼‰

#### ğŸ” ç¼–ç å’Œè§£ç å‚æ•°

- `{{base64(å†…å®¹)}}` - å¯¹æä¾›çš„å†…å®¹è¿›è¡ŒBase64ç¼–ç 
    - ç¤ºä¾‹ï¼š`{{base64(hello world)}}` - å°†"hello world"ç¼–ç ä¸ºBase64
- `{{url_encode(å†…å®¹)}}` - å¯¹æä¾›çš„å†…å®¹è¿›è¡ŒURLç¼–ç 
    - ç¤ºä¾‹ï¼š`{{url_encode(hello world)}}` - å¯¹"hello world"è¿›è¡ŒURLç¼–ç 
- `{{json_escape(å†…å®¹)}}` - å¯¹æä¾›çš„å†…å®¹è¿›è¡ŒJSONè½¬ä¹‰
    - ç¤ºä¾‹ï¼š`{{json_escape("test")}}` - è½¬ä¹‰å¼•å·å’Œç‰¹æ®Šå­—ç¬¦ä»¥ç”¨äºJSON

#### ğŸ”¢ æ•°å­¦è¿ç®—å‚æ•°

- `{{add(a,b)}}` - ä¸¤æ•°ç›¸åŠ 
    - ç¤ºä¾‹ï¼š`{{add(10,5)}}` - è¿”å›15
- `{{sub(a,b)}}` - ä¸¤æ•°ç›¸å‡
    - ç¤ºä¾‹ï¼š`{{sub(10,5)}}` - è¿”å›5
- `{{mul(a,b)}}` - ä¸¤æ•°ç›¸ä¹˜
    - ç¤ºä¾‹ï¼š`{{mul(10,5)}}` - è¿”å›50
- `{{div(a,b)}}` - ä¸¤æ•°ç›¸é™¤
    - ç¤ºä¾‹ï¼š`{{div(10,5)}}` - è¿”å›2

#### ğŸ“ æ–‡æœ¬å¤„ç†å‚æ•°

- `{{upper(æ–‡æœ¬)}}` - å°†æ–‡æœ¬è½¬æ¢ä¸ºå¤§å†™
    - ç¤ºä¾‹ï¼š`{{upper(hello)}}` - è¿”å›"HELLO"
- `{{lower(æ–‡æœ¬)}}` - å°†æ–‡æœ¬è½¬æ¢ä¸ºå°å†™
    - ç¤ºä¾‹ï¼š`{{lower(HELLO)}}` - è¿”å›"hello"
- `{{reverse(æ–‡æœ¬)}}` - åè½¬æ–‡æœ¬
    - ç¤ºä¾‹ï¼š`{{reverse(hello)}}` - è¿”å›"olleh"
- `{{substr(æ–‡æœ¬,èµ·å§‹ä½ç½®,é•¿åº¦)}}` - ä»æ–‡æœ¬ä¸­æå–å­å­—ç¬¦ä¸²
    - ç¤ºä¾‹ï¼š`{{substr(hello world,0,5)}}` - è¿”å›"hello"

#### ğŸ¨ é¢œè‰²ç”Ÿæˆå‚æ•°

- `{{color_hex}}` - ç”Ÿæˆéšæœºçš„åå…­è¿›åˆ¶é¢œè‰²ä»£ç 
    - ç¤ºä¾‹ï¼š`#FF5733`
- `{{color_rgb}}` - ç”Ÿæˆéšæœºçš„RGBé¢œè‰²å€¼
    - ç¤ºä¾‹ï¼š`rgb(255, 87, 51)`
- `{{color_hsl}}` - ç”Ÿæˆéšæœºçš„HSLé¢œè‰²å€¼
    - ç¤ºä¾‹ï¼š`hsl(120, 50%, 75%)`

#### ğŸ“ æ–‡ä»¶å’ŒMIMEç±»å‹å‚æ•°

- `{{mime_type}}` - ç”Ÿæˆéšæœºçš„MIMEç±»å‹
    - ç¤ºä¾‹ï¼š`application/json`ã€`image/png`ã€`text/html`
- `{{file_ext}}` - ç”Ÿæˆéšæœºçš„æ–‡ä»¶æ‰©å±•å
    - ç¤ºä¾‹ï¼š`.jpg`ã€`.pdf`ã€`.txt`

#### ğŸ‘¤ è™šæ‹Ÿæ•°æ®ç”Ÿæˆå‚æ•°

- `{{fake_email}}` - ç”Ÿæˆé€¼çœŸçš„è™šæ‹Ÿé‚®ç®±åœ°å€
    - ç¤ºä¾‹ï¼š`john.smith@example.com`
- `{{fake_phone}}` - ç”Ÿæˆè™šæ‹Ÿç”µè¯å·ç 
    - ç¤ºä¾‹ï¼š`+1-555-0123`
- `{{fake_name}}` - ç”Ÿæˆè™šæ‹Ÿäººå
    - ç¤ºä¾‹ï¼š`å¼ ä¸‰`
- `{{fake_domain}}` - ç”Ÿæˆè™šæ‹ŸåŸŸå
    - ç¤ºä¾‹ï¼š`example-site.com`

#### â° æ—¶é—´è®¡ç®—å‚æ•°

- `{{time_add(æ—¶é•¿)}}` - åœ¨å½“å‰æ—¶é—´åŸºç¡€ä¸Šå¢åŠ æŒ‡å®šæ—¶é•¿
    - ç¤ºä¾‹ï¼š`{{time_add(1h)}}` - åœ¨å½“å‰æ—¶é—´ä¸Šå¢åŠ 1å°æ—¶
    - ç¤ºä¾‹ï¼š`{{time_add(30m)}}` - åœ¨å½“å‰æ—¶é—´ä¸Šå¢åŠ 30åˆ†é’Ÿ
    - æ”¯æŒçš„å•ä½ï¼šsï¼ˆç§’ï¼‰ã€mï¼ˆåˆ†é’Ÿï¼‰ã€hï¼ˆå°æ—¶ï¼‰ã€dï¼ˆå¤©ï¼‰
- `{{time_sub(æ—¶é•¿)}}` - åœ¨å½“å‰æ—¶é—´åŸºç¡€ä¸Šå‡å»æŒ‡å®šæ—¶é•¿
    - ç¤ºä¾‹ï¼š`{{time_sub(1d)}}` - åœ¨å½“å‰æ—¶é—´ä¸Šå‡å»1å¤©
    - ç¤ºä¾‹ï¼š`{{time_sub(2h30m)}}` - åœ¨å½“å‰æ—¶é—´ä¸Šå‡å»2å°æ—¶30åˆ†é’Ÿ

</div>
</details>

ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹é…ç½®æ–‡ä»¶ï¼š

```yaml
services:
  - name: "å‚æ•°åŒ–æœåŠ¡"
    endpoints:
        - url: "https://api.example.com/data?date={{%Y-%m-%d}}&rand={{rand(1,100)}}"
        - url: "https://api.example.com/submit"
          method: "POST"
          headers:
            Content-Type: application/json
            X-Request-ID: "{{uuid}}"
          body: '{"session_id": "{{rand_str(16)}}", "timestamp": "{{%s}}"}'
```

### è‡ªå®šä¹‰é€šçŸ¥

PongHub ç°åœ¨æ”¯æŒå¤šç§é€šçŸ¥æ–¹å¼ï¼Œå½“æœåŠ¡å‡ºç°é—®é¢˜æˆ–è¯ä¹¦å³å°†è¿‡æœŸæ—¶ï¼Œå¯ä»¥é€šè¿‡å¤šä¸ªæ¸ é“å‘é€è­¦æŠ¥é€šçŸ¥ã€‚

<details>
<summary>ç‚¹å‡»å±•å¼€æŸ¥çœ‹æ”¯æŒçš„é€šçŸ¥ç±»å‹</summary>

<div markdown="1">

PongHub æ”¯æŒä»¥ä¸‹é€šçŸ¥æ–¹å¼ï¼š

- **é»˜è®¤é€šçŸ¥** - é€šè¿‡GitHub Actionså·¥ä½œæµå¤±è´¥è¿›è¡Œé€šçŸ¥
- **é‚®ä»¶é€šçŸ¥** - é€šè¿‡SMTPå‘é€é‚®ä»¶ï¼Œæ”¯æŒé«˜çº§å®‰å…¨é€‰é¡¹
- **è‡ªå®šä¹‰Webhook** - å‘é€åˆ°ä»»æ„HTTPç«¯ç‚¹ï¼Œæ”¯æŒé«˜çº§é…ç½®

ä½¿ç”¨æ—¶ï¼Œåœ¨ `config.yaml` æ–‡ä»¶ä¸­æ·»åŠ  `notifications` é…ç½®å—ï¼š

```yaml
notifications:
  enabled: true  # å¯ç”¨é€šçŸ¥åŠŸèƒ½
  methods:       # è¦å¯ç”¨çš„é€šçŸ¥æ–¹å¼
    - email
    - webhook
  
  # å„ç§é€šçŸ¥æ–¹å¼çš„å…·ä½“é…ç½®...
```

#### âš™ï¸ é»˜è®¤é€šçŸ¥

é»˜è®¤æƒ…å†µä¸‹ï¼ŒPongHub ä¼šåœ¨ GitHub Actions å·¥ä½œæµå¤±è´¥æ—¶å‘é€é€šçŸ¥ã€‚

é»˜è®¤é€šçŸ¥ä¼šåœ¨ä»¥ä¸‹æƒ…å†µè‡ªåŠ¨å¯ç”¨ï¼š

- æ²¡æœ‰é…ç½® `notifications` å­—æ®µ
- `notifications.enabled: true` ä½†æ²¡æœ‰æŒ‡å®š `methods` æˆ–ä»…æŒ‡å®šäº†éemail/webhookæ–¹æ³•
- æ˜¾å¼é…ç½® `methods: ["default"]`

å¦‚æœ `notifications` é…ç½®äº† `email` æˆ– `webhook` æ–¹æ³•ï¼Œé»˜è®¤é€šçŸ¥é»˜è®¤å…³é—­ï¼Œé™¤éåœ¨ `notifications.default.enabled` ä¸­æ˜ç¡®å¯ç”¨ã€‚

#### ğŸ“§ é‚®ä»¶é€šçŸ¥

```yaml
email:
  smtp_host: "smtp.gmail.com"       # SMTPæœåŠ¡å™¨åœ°å€
  smtp_port: 587                    # SMTPç«¯å£ï¼Œé»˜è®¤587
  from: "alerts@yourdomain.com"     # å‘ä»¶äººé‚®ç®±
  to:                               # æ”¶ä»¶äººåˆ—è¡¨
    - "admin@yourdomain.com"
    - "ops@yourdomain.com"
  subject: "PongHub Service Alert"  # é‚®ä»¶ä¸»é¢˜ï¼ˆå¯é€‰ï¼‰
  use_tls: true                     # ä½¿ç”¨TLSåŠ å¯†ï¼ˆå¯é€‰ï¼‰
  use_starttls: true                # ä½¿ç”¨STARTTLSï¼ˆå¯é€‰ï¼‰
  skip_verify: false                # è·³è¿‡TLSè¯ä¹¦éªŒè¯ï¼ˆå¯é€‰ï¼‰
  timeout: 30                       # è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’ï¼ˆå¯é€‰ï¼‰
  username: ""                      # SMTPç”¨æˆ·åï¼ˆå¯é€‰ï¼Œç•™ç©ºåˆ™ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼‰
  password: ""                      # SMTPå¯†ç ï¼ˆå¯é€‰ï¼Œç•™ç©ºåˆ™ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼‰
  template: ""                      # è‡ªå®šä¹‰é‚®ä»¶æ¨¡æ¿è·¯å¾„ï¼ˆå¯é€‰ï¼‰
  is_html: true                     # å‘é€HTMLé‚®ä»¶ï¼ˆå¯é€‰ï¼‰
```

æ‰€éœ€ç¯å¢ƒå˜é‡ï¼š

- `SMTP_USERNAME` - SMTPç”¨æˆ·å
- `SMTP_PASSWORD` - SMTPå¯†ç 

#### ğŸ”— è‡ªå®šä¹‰Webhooké…ç½®

```yaml
webhook:
  url: "https://your-webhook-endpoint.com/notify"  # ç•™ç©ºåˆ™ä»ç¯å¢ƒå˜é‡è¯»å–
  method: "POST"                        # HTTPæ–¹æ³•ï¼ˆå¯é€‰ï¼Œé»˜è®¤POSTï¼‰
  headers:                              # è‡ªå®šä¹‰è¯·æ±‚å¤´ï¼ˆå¯é€‰ï¼Œæ”¯æŒç‰¹æ®Šå‚æ•°ï¼‰
    Content-Type: "application/json"
    Authorization: "Bearer {{env(API_TOKEN)}}"  # æ”¯æŒç‰¹æ®Šå‚æ•°
    X-Request-ID: "{{uuid}}"           # ä½¿ç”¨ç‰¹æ®Šå‚æ•°çš„åŠ¨æ€è¯·æ±‚ID
  
  # è®¤è¯é€‰é¡¹ï¼ˆæ‰€æœ‰å­—æ®µå‡æ”¯æŒç‰¹æ®Šå‚æ•°ï¼‰
  auth_type: "bearer"                   # è®¤è¯ç±»å‹ï¼šbearer, basic, apikeyï¼ˆå¯é€‰ï¼‰
  auth_token: "{{env(WEBHOOK_TOKEN)}}"  # ä½¿ç”¨ç¯å¢ƒå˜é‡çš„Bearerä»¤ç‰Œï¼ˆå¯é€‰ï¼‰
  auth_username: "user-{{rand(1000,9999)}}"  # å¸¦åŠ¨æ€åç¼€çš„åŸºæœ¬è®¤è¯ç”¨æˆ·åï¼ˆå¯é€‰ï¼‰
  auth_password: "{{env(AUTH_PASSWORD)}}"     # æ¥è‡ªç¯å¢ƒå˜é‡çš„åŸºæœ¬è®¤è¯å¯†ç ï¼ˆå¯é€‰ï¼‰
  auth_header: "X-API-Key"              # APIå¯†é’¥è‡ªå®šä¹‰å¤´éƒ¨åç§°ï¼ˆå¯é€‰ï¼‰
  
  # è¯·æ±‚é…ç½®
  timeout: 30                           # è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’ï¼ˆå¯é€‰ï¼Œé»˜è®¤30ï¼‰
  retries: 3                            # é‡è¯•æ¬¡æ•°ï¼ˆå¯é€‰ï¼Œé»˜è®¤0ï¼‰
  skip_tls_verify: false                # è·³è¿‡TLSè¯ä¹¦éªŒè¯ï¼ˆå¯é€‰ï¼‰
  
  # é«˜çº§è½½è·è‡ªå®šä¹‰ï¼Œæ”¯æŒç‰¹æ®Šå‚æ•°
  custom_payload:                       # è‡ªå®šä¹‰è¯·æ±‚è½½è·ï¼ˆå¯é€‰ï¼‰
    template: |
      {
        "alert": "{{.Title}}",
        "details": "{{.Message}}",
        "timestamp": "{{%Y-%m-%d %H:%M:%S}}",
        "request_id": "{{uuid}}",
        "environment": "{{env(ENVIRONMENT)}}",
        "random_id": "{{rand(10000,99999)}}"
      }
    content_type: "application/json"    # è½½è·å†…å®¹ç±»å‹ï¼ˆå¯é€‰ï¼‰
    fields:                             # æ”¯æŒç‰¹æ®Šå‚æ•°çš„é¢å¤–å­—æ®µï¼ˆå¯é€‰ï¼‰
      environment: "prod-{{rand(100,999)}}"
      session_id: "{{uuid_short}}"
      build_number: "{{env(BUILD_NUMBER)}}"
      timestamp_unix: "{{%s}}"
    include_title: true                 # åœ¨é¢å¤–å­—æ®µä¸­åŒ…å«æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰
    include_message: true               # åœ¨é¢å¤–å­—æ®µä¸­åŒ…å«æ¶ˆæ¯ï¼ˆå¯é€‰ï¼‰
    title_field: "alert_title"          # æ ‡é¢˜è‡ªå®šä¹‰å­—æ®µåï¼ˆå¯é€‰ï¼‰
    message_field: "alert_message"      # æ¶ˆæ¯è‡ªå®šä¹‰å­—æ®µåï¼ˆå¯é€‰ï¼‰
```

**Webhookä¸­çš„ç‰¹æ®Šå‚æ•°æ”¯æŒï¼š**

Webhooké…ç½®ç°åœ¨å…¨é¢æ”¯æŒåœ¨ä»¥ä¸‹å­—æ®µä¸­ä½¿ç”¨ç‰¹æ®Šå‚æ•°ï¼š

- **URL**: `url: "https://hooks.example.com/{{env(HOOK_ID)}}"`
- **è¯·æ±‚å¤´**: æ‰€æœ‰è¯·æ±‚å¤´å€¼éƒ½å¯ä»¥ä½¿ç”¨ç‰¹æ®Šå‚æ•°
- **è®¤è¯ä¿¡æ¯**: æ‰€æœ‰è®¤è¯å­—æ®µå‡æ”¯æŒåŠ¨æ€å€¼
- **æ¨¡æ¿**: åŒæ—¶æ”¯æŒGoæ¨¡æ¿è¯­æ³•ï¼ˆ`{{.Title}}`ï¼‰å’Œç‰¹æ®Šå‚æ•°ï¼ˆ`{{uuid}}`ï¼‰
- **è‡ªå®šä¹‰å­—æ®µ**: æ‰€æœ‰è‡ªå®šä¹‰è½½è·å­—æ®µå‡æ”¯æŒç‰¹æ®Šå‚æ•°

**æ¨¡æ¿è¯­æ³•å…¼å®¹æ€§ï¼š**

Webhookæ¨¡æ¿ç³»ç»Ÿæ— ç¼æ”¯æŒä¸¤ç§è¯­æ³•ï¼š

- **Goæ¨¡æ¿è¯­æ³•**: `{{.Title}}`ã€`{{.Message}}` - è®¿é—®é€šçŸ¥æ•°æ®
- **ç‰¹æ®Šå‚æ•°**: `{{uuid}}`ã€`{{%Y-%m-%d}}`ã€`{{env(VAR)}}` - åŠ¨æ€å€¼

ç»“åˆä¸¤ç§è¯­æ³•çš„ç¤ºä¾‹ï¼š

```yaml
custom_payload:
  template: |
    {
      "service_alert": "{{.Title}}",
      "description": "{{.Message}}",
      "alert_id": "{{uuid_short}}",
      "timestamp": "{{%Y-%m-%d %H:%M:%S}}",
      "environment": "{{env(DEPLOY_ENV)}}",
      "correlation_id": "{{rand_str(12)}}"
    }
  fields:
    datacenter: "{{env(DATACENTER)}}"
    version: "{{env(APP_VERSION)}}"
```

æ‰€éœ€ç¯å¢ƒå˜é‡ï¼š

- `WEBHOOK_URL` - è‡ªå®šä¹‰Webhook URLï¼ˆå¦‚æœ`url`å­—æ®µä¸ºç©ºï¼‰
- ç‰¹æ®Šå‚æ•°ä¸­å¼•ç”¨çš„ä»»ä½•ç¯å¢ƒå˜é‡ï¼ˆå¦‚ï¼š`API_TOKEN`ã€`ENVIRONMENT`ï¼‰

</div>
</details>

ä»¥ä¸Šæ‰€éœ€çš„ç¯å¢ƒå˜é‡å‡å¯é€šè¿‡ GitHub Actions çš„ Repository Secrets è®¾ç½®ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„é€šçŸ¥é…ç½®ç¤ºä¾‹æ–‡ä»¶ï¼š

```yaml
display_num: 72
timeout: 5
max_retry_times: 2
max_log_days: 3
cert_notify_days: 7

services:
  - name: "Example Service"
    endpoints:
      - url: "https://example.com/health"

notifications:
  enabled: true
  methods:
    - email
  
  email:
    smtp_host: "smtp.gmail.com"
    smtp_port: 587
    from: "alerts@yourdomain.com"
    to:
      - "admin@yourdomain.com"
      - "ops@yourdomain.com"
    subject: "ğŸš¨ PongHub æœåŠ¡å‘Šè­¦"
    use_starttls: true
    is_html: true
```

## æœ¬åœ°å¼€å‘

æœ¬é¡¹ç›®ä½¿ç”¨ Makefile è¿›è¡Œæœ¬åœ°å¼€å‘å’Œæµ‹è¯•ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨æœ¬åœ°è¿è¡Œé¡¹ç›®ï¼š

```bash
make run
```

é¡¹ç›®æœ‰ä¸€äº›æµ‹è¯•ç”¨ä¾‹ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿è¡Œæµ‹è¯•ï¼š

```bash
make test
```

## å…è´£å£°æ˜

[PongHub](https://github.com/WCY-dt/ponghub) ä»…ç”¨äºä¸ªäººå­¦ä¹ å’Œç ”ç©¶ï¼Œä¸å¯¹ç¨‹åºçš„ä½¿ç”¨è¡Œä¸ºæˆ–ç»“æœè´Ÿè´£ã€‚è¯·å‹¿å°†å…¶ç”¨äºå•†ä¸šç”¨é€”æˆ–éæ³•æ´»åŠ¨ã€‚
